<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SRUOP dashboard</title>

    <link rel="stylesheet" href="/css/history.css">
    <link rel="stylesheet" href="/css/dashboard.css">
    <link rel="stylesheet" href="/css/member.css">


    <script src="/static/js/dashboard.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script> <!-- gaugechart -->
    <!-- ë§ˆì¸ë“œë§µ test -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cytoscape/3.19.1/cytoscape.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.4/index.global.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.4/index.global.min.js"></script>
</head>
<body>
    
        <!-- ì‚¬ì´ë“œë°” -->
        <div id="sidebar" class="sidebar">
            <ul>
                <li>
                    <a href="/edit-profile">íšŒì›ì •ë³´ ìˆ˜ì •</a>
                </li>
                <li>
                    <a href="/history">ì´ë ¥ ì¡°íšŒ</a>
                </li>
                <li>
                    <a href="/mystudy">ë‚´ìŠ¤í„°ë””</a>
                </li>
            </ul>
        </div>
        <!-- ì‚¬ì´ë“œë°” ë-->
    
        <!-- ì‚¬ì´ë“œë°” ì™¸ ë³¸ë¬¸ ì‹œì‘ -->
        <div id="main">
            <button class="sidebar-btn" onclick="Sidebar_move()">â˜°</button>
        </div>
        <!-- ì‚¬ì´ë“œë°” ì™¸ ë³¸ë¬¸ ì‹œì‘ ë -->
    
        <!-- ìƒë‹¨ ë°”-->
        <header>
            <div class="logo">SROUP</div>
            <div>
<<<<<<< HEAD
                <button onclick="location.href='/4.groupgenerate'">ê·¸ë£¹ìƒì„±</button>
                <button onclick="location.href='/edit-profile'">ë§ˆì´í˜ì´ì§€</button>
                <button onclick="location.href='/3-1.main-out'">ë¡œê·¸ì•„ì›ƒ</button>
=======
                <button onclick="location.href='4.groupgenerate.html'">ê·¸ë£¹ìƒì„±</button>
                <button onclick="location.href='edit-profile.html'">ë§ˆì´í˜ì´ì§€</button>
                <form action="/logout" method="post" style="display: inline;">
					<button type="submit">ë¡œê·¸ì•„ì›ƒ</button>
				</form>
>>>>>>> branch 'master' of https://github.com/2024-SMHRD-KDT-LangIntelligence-1/Sroup.git
            </div>
        </header>
    
        <!-- dashboard -->
        <div class="tab-container">
            <ul class="tabs">
                <li class="tab" data-tab="tab1">Group Board</li>
                <li class="tab" data-tab="tab2">My Board</li>
                <li class="tab" data-tab="tab3">Member</li>
            </ul>
            <!-- Group Board -->
            <div class="tab-content" id="tab1" >
                <h3>ê·¸ë£¹ ëŒ€ì‹œë³´ë“œ </h3>
                <div id="mindmap-container" style="width: 100%; height: 400px;"></div>

    <!-- Dashboard Section -->
    <div id="dashboard-section" style="margin-top: 20px;">
        <h4>ì±Œë¦°ì§€ ë…¸ë“œ ë³„ ì œì¶œ ì—…ë¡œë“œ</h4>
        <div id="dashboard-list">
            <!-- Individual dashboards will be generated here -->
        </div>
    </div>
                <!-- ìº˜ë¦°ë” -->
                <div id="calendar-container"></div>
               <!-- ìŠ¤í„°ë”” ë­í‚¹ -->
            <div id="ranking" style="margin-top: 40px;">
                <h3>ìŠ¤í„°ë”” íƒ€ì„ ë­í‚¹</h3>
                <table style="width: 100%; border-collapse: collapse;">
                    <thead>
                        <tr style="background-color: #f4f4f4;">
                            <th style="border: 1px solid #ddd; padding: 8px;">ìˆœìœ„</th>
                            <th style="border: 1px solid #ddd; padding: 8px;">ì´ë¦„</th>
                            <th style="border: 1px solid #ddd; padding: 8px;">ì‹œê°„(ë¶„)</th>
                        </tr>
                    </thead>
                    <tbody id="ranking-table-body">
                        <tr>
                            <td style="border: 1px solid #ddd; padding: 8px;">1</td>
                            <td style="border: 1px solid #ddd; padding: 8px;">ê¹€ì² ìˆ˜</td>
                            <td style="border: 1px solid #ddd; padding: 8px;">1205</td>
                        </tr>
                        <tr>
                            <td style="border: 1px solid #ddd; padding: 8px;">2</td>
                            <td style="border: 1px solid #ddd; padding: 8px;">ì´ì˜í¬</td>
                            <td style="border: 1px solid #ddd; padding: 8px;">1102</td>
                        </tr>
                        <tr>
                            <td style="border: 1px solid #ddd; padding: 8px;">3</td>
                            <td style="border: 1px solid #ddd; padding: 8px;">ë°•ë¯¼ìˆ˜</td>
                            <td style="border: 1px solid #ddd; padding: 8px;">985</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
            </div>
            <div class="tab-content" id="tab2">
                <div class="tab-study" id="tab2-1"> 
                    <h2>STUDY TIMER</h2>
                    <button class="timer-btn"> ON </button>
                </div> 
    
                <div class="tab-study" id="tab2-2"> 
                    <h2> ğŸ”” ì•Œë¦¼ | íƒˆí‡´í•œ ê·¸ë£¹ì› XXXë‹˜ì˜ ë¦¬ë·°ë¥¼ ë‚¨ê²¨ì£¼ì„¸ìš”! </h2> 
                </div>
                <div class="popup-overlay"></div>
                <div class="popup" id="popup2">
                    <h2>ì•Œë¦¼ </h2>
                    <p> 
                        <table>
                            <tr>
                                <td> 25.01.02 </td>
                                <td> íƒˆí‡´ ë©¤ë²„ 000 ë‹˜ ë¦¬ë·°ë¥¼ ë‚¨ê²¨ì£¼ì„¸ìš”! </td>
                                <td></td>
                                <td> 
                                    <!-- <button onclick="location.href='review.html'">ë°”ë¡œê°€ê¸°</button> </td> -->
                                    <button onclick="reviewpopup()">ë°”ë¡œê°€ê¸°</button> 
                                </td>
                            </tr>
                        </table>     
                    </p>
                </div>
    
                <div class="tab-study" id="tab2-3">
                    <h2 id="write-tab"> íšŒê³ ë¡ âœï¸</h2> 
                    <div class="date-navigation">
                        <button id="prev-date">&lt;</button>
                        <span id="current-date"> 0000.00.00 </span> 
                        <button id="next-date">&gt;</button>
                    </div>
                    <div class="study-content" id="study-content">
                        ì‘ì„±ëœ ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤.
                    </div>
                </div>
    
                <!-- íŒì—… ì½”ë“œ -->
                <div class="popup-overlay"></div>
                <div class="popup" id="popup3">
                    <h2> íšŒê³ ë¡ </h2>
                    <form class="form-horizontal" action="/write-learning-record" method="post" enctype="multipart/form-data">
                    <div class="form-group"> 
                        <label class="control-label col-sm-2" for="title">ì œëª©:</label>
                          <div class="col-sm-10">
                            <input type="text" name="learning_title" class="form-control" id="title" placeholder="ì œëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”." required>
                           </div>
                       </div>
                        
                    <p></p>
                     <div class="form-group">
                          <label class="control-label col-sm-2" for="content">ë‚´ìš©:</label>
                          <div class="col-sm-10">
                            <textarea type="text" rows="10" name = "learning_content" class="form-control" id="content" placeholder="ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”" required> </textarea>
                          </div>
                    </div>
                        <button class="upload" type="submit"> ë“±ë¡í•˜ê¸° </button>
                    </form>
                </div>
    
    
                <div class="tab-study" id="tab2-4"> 
                    <canvas id="gaugeChart" style="height: 40vh"></canvas>
                </div>
                
                
                <div class="tab-study" id="tab2-5"> 
                    <div class="tab-study" id="tab2-5-1"> ìˆ˜í–‰ë¥  </div>
                    <canvas id="progresschart" style="height: 10vh" ></canvas>
    
                </div>
    
    
                <div class="tab-study" id="tab2-6">
                    <div>
                        <div class="calendar">
                            <div class="calendar-header">
                                <button id="prev-month">&lt;</button>
                                <h2 id="month-year"></h2>
                                <button id="next-month">&gt;</button>
                            </div>
                            <div class="calendar-days">
                                <div>ì¼</div>
                                <div>ì›”</div>
                                <div>í™”</div>
                                <div>ìˆ˜</div>
                                <div>ëª©</div>
                                <div>ê¸ˆ</div>
                                <div>í† </div>
                            </div>
                            <div class="days" id="days-content"></div>
                        </div>
                    </div>
                </div>
                <img id="tab2-8" src="https://ghchart.rshah.org/082918"/>
            </div>
            </div>
            <div class="tab-content" id="tab3">
                <h3>ë©¤ë²„ ë¦¬ìŠ¤íŠ¸</h3>
                <!--team-profile -->
                <div class="profile-card">
                    <div class="profile-header">
                        <img src="https://via.placeholder.com/60" alt="Profile Picture">
                        <div class="info">
                            <h3>ë°•ìŠ¹í˜</h3>
                            <span>ê´‘ì£¼ê´‘ì—­ì‹œ Â· psh224v@naver.com</span>
                        </div>
                    </div>
            
                    <div class="tags">
                        <div class="tag">front-end</div>
                        <div class="tag">back-end</div>
                        <div class="tag">database</div>
                        <div class="tag">project</div>
                    </div>
            
                    <div class="content-area">
                        <div class="content">
                            <div class="content-title">ê°€ì…í•œ ê·¸ë£¹</div>
                            <div class="content-detail">
                                âœ¨íŒŒì´ì¬ ì •ë³µ(ê¸°ì´ˆí¸)âœ¨ - íŒŒì´ë¦¬ëŠ” íŒŒì´ì¬ Â· 6ëª…
                            </div>
                        </div>
                        <div class="content">
                            <div class="content-title">ì¶œì„ë¥ </div>
                            <div class="content-detail">
                                12íšŒ ì¤‘ 8 íšŒ ì°¸ì„, 66%
                            </div>
                        </div>
                        <div class="content">
                            <div class="content-title">ë‹¬ì„±ë¥ </div>
                            <div class="content-detail">
                                ì±Œë¦°ì§€ 3íšŒ ì°¨ : 72%
                            </div>
                        </div>
                    </div>
            
                    <div class="buttons">
                        <button class="button" onclick="showDetailDashboard('ë°•ìŠ¹í˜', 'ê´‘ì£¼ê´‘ì—­ì‹œ', 'âœ¨íŒŒì´ì¬ ì •ë³µ(ê¸°ì´ˆí¸)âœ¨', '85%', '90%')">íšŒì› ìƒì„¸ì •ë³´</button>
                        <button class="button" onclick="removeMember()">íšŒì› ë‚´ë³´ë‚´ê¸°</button>
                    </div>
                </div>
            </div>
        </div> 
    
        <!-- ìƒì„¸ ëŒ€ì‹œë³´ë“œ -->
        <div id="detail-dashboard" class="detail-dashboard">
            <h3>íšŒì› ìƒì„¸ì •ë³´</h3>
            <p id="detail-name"></p>
            <p id="detail-location"></p>
            <p id="detail-group"></p>
            <p id="detail-attendance"></p>
            <p id="detail-achievement"></p>

            <div class="record-title">
            <button class="close-button" onclick="closeDetailDashboard()">ë‹«ê¸°</button>
        </div>
    
    <script>
        /* ì‚¬ì´ë“œë°” ì—´ê³  ë‹«ëŠ” JS */
        function Sidebar_move() {
            var sidebar = document.getElementById("sidebar");
            var mainContent = document.getElementById("main");
                
            if (sidebar.style.left === "0px") {
                sidebar.style.left = "-220px";
                mainContent.style.marginLeft = "0";
            } else {
                sidebar.style.left = "0";
                mainContent.style.marginLeft = "220px";
            }
        }    
        /* ë§ˆì¸ë“œë§µ ìƒì„± */
        let uploadedFiles = {}; // Store uploaded files per node
        let nodeLabels = {}; // Store node labels by ID

        // Initialize Mindmap
        document.addEventListener('DOMContentLoaded', function() {
            var cy = cytoscape({
                container: document.getElementById('mindmap-container'),
        elements: [
            { data: { id: 'a', label: 'íŒŒì´ì¬ ì™„ì „ì •ë³µ!' } },
            { data: { id: 'b', label: 'íŒŒì´ì¬ ì„¤ì¹˜' } },
            { data: { id: 'c', label: 'ìˆ«ìì™€ ë¬¸ìì—´ ë°°ìš°ê¸°' } },
            { data: { id: 'd', label: 'ì¡°ê±´ë¬¸' } },
            { data: { id: 'e', label: 'ë°˜ë³µë¬¸-ì„¸ë¶€1' } },
            { data: { id: 'b-1', label: 'ë°˜ë³µë¬¸-ì„¸ë¶€2' } },
            { data: { id: 'b-2', label: 'ë°˜ë³µë¬¸-ì„¸ë¶€3' } },
            { data: { id: 'c-1', label: 'í•¨ìˆ˜' } },
            { data: { id: 'c-2', label: 'ì˜ˆìƒë¬¸ì œ ì¶œì œ' } },
            { data: { id: 'd-1', label: 'ì˜ˆìƒë¬¸ì œ í’€ê¸°' } },
            { data: { id: 'd-2', label: 'ì±„ì ' } },
            { data: { id: 'b-1-1', label: 'ë‚´ìš©ì •ë¦¬' } },
            { data: { id: 'c-1-1', label: 'ì°¸ê³  ì‚¬ì´íŠ¸ ì •ë¦¬' } },
            { data: { id: 'c-1-2', label: 'ì°¸ê³  ìœ íŠœë¸Œ ì •ë¦¬' } },
            { data: { id: 'd-1-1', label: 'ì˜¤ë‹µí’€ì´' } },
            { data: { source: 'a', target: 'b' } },
            { data: { source: 'a', target: 'c' } },
            { data: { source: 'a', target: 'd' } },
            { data: { source: 'a', target: 'e' } },
            { data: { source: 'b', target: 'b-1' } },
            { data: { source: 'b', target: 'b-2' } },
            { data: { source: 'c', target: 'c-1' } },
            { data: { source: 'c', target: 'c-2' } },
            { data: { source: 'd', target: 'd-1' } },
            { data: { source: 'd', target: 'd-2' } },
            { data: { source: 'b-1', target: 'b-1-1' } },
            { data: { source: 'c-1', target: 'c-1-1' } },
            { data: { source: 'c-1', target: 'c-1-2' } },
            { data: { source: 'd-1', target: 'd-1-1' } },
        ],
        style: [
            {
                selector: 'node',
                style: {
                    'content': 'data(label)',
                    'text-valign': 'center',
                    'color': 'black',
                    'background-color': '#ebd515',
                    'width': 70,
                    'height': 70,
                    'font-size': '12px'
                }
            },
            {
                selector: 'edge',
                style: {
                    'width': 3,
                    'line-color': '#00aaff',
                    'target-arrow-color': '#00aaff',
                    'target-arrow-shape': 'triangle', /* í™”ì‚´í‘œ ëª¨ì–‘ */
                    'curve-style': 'bezier'
                }
            }
        ],
        layout: {
            name: 'breadthfirst',
            directed: true,       // ë°©í–¥ì„ ì§€ì •
            padding: 10,          // ì—¬ë°±
            roots: '#a',          // ì‹œì‘ ë…¸ë“œ ì§€ì •
            orientation: 'left-to-right' // ë°©í–¥ ì„¤ì • (ì¢Œ â†’ ìš°)
        },
         // í™•ëŒ€/ì¶•ì†Œ ë° ë“œë˜ê·¸ ë¹„í™œì„±í™” ì„¤ì •
        userZoomingEnabled: false, // ì‚¬ìš©ìê°€ í™•ëŒ€/ì¶•ì†Œí•  ìˆ˜ ì—†ê²Œ ì„¤ì •
    });
    // ë…¸ë“œ í´ë¦­ ì´ë²¤íŠ¸ ì¶”ê°€
    userZoomingEnabled: false, // ì‚¬ìš©ìê°€ í™•ëŒ€/ì¶•ì†Œí•  ìˆ˜ ì—†ê²Œ ì„¤ì •
    cy.nodes().forEach(node => {
                nodeLabels[node.id()] = node.data('label');
                createNodeDashboard(node.id());
            });

            // Add listener for adding new nodes
            cy.on('add', 'node', function(evt) {
                const newNode = evt.target;
                nodeLabels[newNode.id()] = newNode.data('label');
                createNodeDashboard(newNode.id());
            });
        });
        function createNodeDashboard(nodeId) {
            const dashboardList = document.getElementById('dashboard-list');

            // Create individual dashboard
            const dashboard = document.createElement('div');
            dashboard.id = `dashboard-${nodeId}`;
            dashboard.className = 'node-dashboard';

            // Title
            const title = document.createElement('h5');
            title.innerText = `Node ${nodeLabels[nodeId]} Dashboard`;
            dashboard.appendChild(title);

            // File upload input
            const fileInput = document.createElement('input');
            fileInput.type = 'file';
            fileInput.onchange = function(event) {
                const file = event.target.files[0];
                if (file) {
                    if (!uploadedFiles[nodeId]) {
                        uploadedFiles[nodeId] = [];
                    }
                    uploadedFiles[nodeId].push(file);
                    updateUploadedFilesList(nodeId);
                }
            };
            dashboard.appendChild(fileInput);

            // Uploaded files list
            const filesContainer = document.createElement('div');
            filesContainer.id = `uploaded-files-${nodeId}`;
            dashboard.appendChild(filesContainer);

            // Save button
            const saveButton = document.createElement('button');
            saveButton.className = 'save-button';
            saveButton.innerText = 'Save Files';
            saveButton.onclick = function() {
                saveAllFiles(nodeId);
            };
            dashboard.appendChild(saveButton);

            dashboardList.appendChild(dashboard);
        }

        function updateUploadedFilesList(nodeId) {
            const filesContainer = document.getElementById(`uploaded-files-${nodeId}`);
            filesContainer.innerHTML = '';
            if (uploadedFiles[nodeId] && uploadedFiles[nodeId].length > 0) {
                uploadedFiles[nodeId].forEach((file, index) => {
                    const fileLink = document.createElement('a');
                    fileLink.href = URL.createObjectURL(file);
                    fileLink.download = file.name;
                    fileLink.innerText = `(${nodeLabels[nodeId]}) ${index + 1}. ${file.name}`;
                    fileLink.style.display = 'block';
                    filesContainer.appendChild(fileLink);
                });
            } else {
                filesContainer.innerHTML = '<p>No files uploaded for this node.</p>';
            }
        }

        function saveAllFiles(nodeId) {
            if (!uploadedFiles[nodeId] || uploadedFiles[nodeId].length === 0) {
                alert('No files to save for this node.');
                return;
            }

            uploadedFiles[nodeId].forEach(file => {
                const formData = new FormData();
                formData.append('nodeId', nodeId);
                formData.append('file', file);

                fetch('/save-file', {
                    method: 'POST',
                    body: formData
                })
                .then(response => response.json())
                .then(data => {
                    console.log('File saved successfully:', data);
                })
                .catch(error => {
                    console.error('Error saving file:', error);
                });
            });

            alert('All files have been saved.');
        }

        /* ìº˜ë¦°ë” ìƒì„± */
        document.addEventListener('DOMContentLoaded', function() {
            var calendarEl = document.getElementById('calendar-container');
            var calendar = new FullCalendar.Calendar(calendarEl, {
                initialView: 'dayGridMonth',
                events: [
                    { title: 'ì •ë³´ì²˜ë¦¬ê¸°ì‚¬ ìê²©ì¦ ì·¨ë“', start: '2024-12-05' },
                    { title: 'ì±… êµ¬ë§¤', start: '2024-12-10' },
                    { title: '1~5ê°• ë§ˆìŠ¤í„°', start: '2024-12-15' },
                    { title: '6~10ê°• ë§ˆìŠ¤í„°', start: '2024-12-20' },
                    { title: 'í•„ê¸°ì‹œí—˜ ëª¨ì˜ê³ ì‚¬', start: '2025-01-05' },
                    { title: 'í•„ê¸°ì‹œí—˜', start: '2025-01-11' },
                    { title: 'ì‹¤ê¸° 1~5ê°• ë§ˆìŠ¤í„°', start: '2025-01-18' },
                    { title: 'ì‹¤ê¸° 6~10ê°• ë§ˆìŠ¤í„°', start: '2025-01-25' },
                    { title: 'ì‹¤ê¸°ì‹œí—˜ ëª¨ì˜ê³ ì‚¬', start: '2025-01-31' },
                ]
            });
            calendar.render();
        });
        // ë§ˆì¸ë“œë§µë…¸ë“œ í´ë¦­ ì´ë²¤íŠ¸ ì¶”ê°€
        
        

        /* ë©¤ë²„ ë¦¬ìŠ¤íŠ¸ ê¸°ëŠ¥ */
        function showDetailDashboard(name, location, group, attendance, achievement) {
            document.getElementById('detail-name').innerText = `ì´ë¦„: ${name}`;
            document.getElementById('detail-location').innerText = `ìœ„ì¹˜: ${location}`;
            document.getElementById('detail-group').innerText = `ê°€ì…í•œ ê·¸ë£¹: ${group}`;
            document.getElementById('detail-attendance').innerText = `ì¶œì„ë¥ : ${attendance}`;
            document.getElementById('detail-achievement').innerText = `ë‹¬ì„±ë¥ : ${achievement}`;
    
            document.getElementById('detail-dashboard').style.display = 'block';
        }
    
        function closeDetailDashboard() {
            document.getElementById('detail-dashboard').style.display = 'none';
        }
    
        document.addEventListener("DOMContentLoaded", function() {
            var tabs = document.querySelectorAll('.tab');
            var tabContents = document.querySelectorAll('.tab-content');
    
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    var target = tab.getAttribute('data-tab');
    
                 // íƒ­ ì„ íƒ ì‹œ ë‹¤ë¥¸ íƒ­ì˜ ë‚´ìš© ì‚­ì œ 
                 tabContents.forEach(content => content.classList.remove('active'));
    
                 // í´ë¦­í•œ íƒ­ê³¼ í•´ë‹¹ ì½˜í…ì¸ ì— 'active' í´ë˜ìŠ¤ ì¶”ê°€
                 tab.classList.add('active');
                 document.getElementById(target).classList.add('active');
                });
            });
    
            // ê¸°ë³¸ì ìœ¼ë¡œ ì²« ë²ˆì§¸ íƒ­ì„ í™œì„±í™”
            tabs[0].classList.add('active');
            tabContents[0].classList.add('active');
        });
    
        function removeMember() {
            alert('íšŒì›ì´ ë‚´ë³´ë‚´ì¡ŒìŠµë‹ˆë‹¤.');
        }
        // ì•Œë¦¼ íŒì—… ì—´ê¸° 
    const popupOverlay = document.querySelector(".popup-overlay");
    
    const tab2writer = document.querySelector("#tab2-2") 
    const popup2 = document.querySelector("#popup2");

    tab2writer.addEventListener("click", () => {
    popupOverlay.style.display = "block"; // overlay ë°°ê²½ í‘œì‹œ 
    popup2.style.display = "block";       // íŒì—… í‘œì‹œ
    });
    
    // íšŒê³ ë¡ íŒì—… ì—´ê¸°
    const tab3writer = document.querySelector("#write-tab") 
    const popup3 = document.querySelector("#popup3");
    
    tab3writer.addEventListener("click", () => {
    popupOverlay.style.display = "block"; // overlay ë°°ê²½ í‘œì‹œ 
    popup3.style.display = "block";       // íŒì—… í‘œì‹œ
    });    

    // íŒì—… ë‹«ê¸° 
    const closePopup = () => {
    popupOverlay.style.display = "none"; // overlay ë°°ê²½ ìˆ¨ê¹€ 
    popup2.style.display = "none";     // ì•Œë¦¼ íŒì—… ë‹«ê¸°
    popup3.style.display = "none";     // íšŒê³ ë¡ íŒì—… ë‹«ê¸° 
    };

    popupOverlay.addEventListener("click", closePopup);   // overlay (ì°½ ë°– ë¶€ë¶„) í´ë¦­ ì‹œ íŒì—… ë‹«í˜ 

    // íšŒê³ ë¡ ë‚ ì§œ
    const currentDate = new Date(); // í˜„ì¬ ë‚ ì§œ 

    const currentDateElement = document.getElementById("current-date");
    const studycontent = document.getElementById("study-content") 
    const prevdate = document.getElementById("prev-date") 
    const nextdate = document.getElementById("next-date") 
    const popupdate = document.getElementById("popup-date");


    function formatDate(date) {
      return `${date.getFullYear()}.${String(date.getMonth() + 1).padStart(2, "0")}.${String(date.getDate()).padStart(2, "0")}`;
    };

    const records = {}; 

    function updateDateDisplay() {
      currentDateElement.textContent = formatDate(currentDate);
      const recordKey = formatDate(currentDate);
      studycontent.textContent = records[recordKey] || "íšŒê³ ë¡ì„ ì‘ì„±í•´ì£¼ì„¸ìš”.";
    };

    // ì´ì „ë‚ ì§œ íšŒê³ ë¡ 
    prevdate.addEventListener("click", ()=> {
        currentDate.setDate(currentDate.getDate() -1);
        updateDateDisplay();
    });

    // ì´í›„ë‚ ì§œ íšŒê³ ë¡
    nextdate.addEventListener("click", ()=> {
        currentDate.setDate(currentDate.getDate() +1);
        updateDateDisplay();
    });

    // ì‘ì„± ë²„íŠ¼
    const uploadbtn = document.querySelector(".upload");

    // íšŒê³ ë¡ ì‘ì„± ì‹œ ë‹¬ë ¥ì— í‘œì‹œ
    uploadbtn.addEventListener("click", (event) => {

    const title = document.getElementById("title").value;
    const content = document.getElementById("content").value;
    const recordKey = formatDate(currentDate);

    if (title && content) {
        // íšŒê³ ë¡ ë°ì´í„° ì €ì¥
        records[recordKey] = { title, content };

        alert("íšŒê³ ë¡ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!");
        closePopup(); // íŒì—… ë‹«ê¸°
        updateDateDisplay(); // íšŒê³ ë¡ ë‚´ìš© ê°±ì‹ 
        updateCalendar(currentDate); // ë‹¬ë ¥ ê°±ì‹ 
    } else {
    	event.preventDefault();
        alert("ì œëª©ê³¼ ë‚´ìš©ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.");
    }
    });

    // íƒ€ì´ë¨¸ 
    var timerbtn = document.querySelector(".timer-btn")

    timerbtn.addEventListener("click", ()=> {
        const timerWindow = window.open(
        "studytimer.html", // íƒ€ì´ë¨¸ ì‹¤í–‰ (íƒ€ì´ë¨¸ html)
        "íƒ€ì´ë¨¸", // íƒ€ì´ë¨¸ë¡œ ì—´ ì°½ ì´ë¦„
        "width=400,height=300" // íƒ€ì´ë¨¸ ì°½ í¬ê¸° 
        )

        if (!timerWindow) {
        alert("íŒì—… ì°¨ë‹¨ì„ í•´ì£¼ì„¸ìš”! íƒ€ì´ë¨¸ ì°½ì„ ì—´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.")
        }
    });

    // ë‹¬ë ¥
    const calendarcontent = document.getElementById("days-content");
    const monthyear = document.getElementById("month-year");
    const prevmonth = document.getElementById("prev-month");
    const nextmonth = document.getElementById("next-month");

    // ë‹¬ë ¥ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
    function updateCalendar(date) {
        const year = date.getFullYear();
        const month = date.getMonth();

        monthyear.textContent = `${year}ë…„ ${month + 1}ì›”`;

        const firstDay = new Date(year, month, 1).getDay(); // ì´ë²ˆ ë‹¬ 1ì¼ì˜ ìš”ì¼
        const lastDate = new Date(year, month + 1, 0).getDate(); // ì´ë²ˆ ë‹¬ì˜ ë§ˆì§€ë§‰ ë‚ ì§œ

        calendarcontent.innerHTML = ""; // ê¸°ì¡´ ë‚´ìš© ì´ˆê¸°í™”

    // ë¹ˆ ì¹¸ ì¶”ê°€
        for (let i = 0; i < firstDay; i++) {
            const emptyDiv = document.createElement("div");
            emptyDiv.classList.add("empty");
            calendarcontent.appendChild(emptyDiv);
        }

    // ë‚ ì§œ ì¶”ê°€
        for (let day = 1; day <= lastDate; day++) {
            const dayDiv = document.createElement("div");
            dayDiv.textContent = day;

            const recordKey = `${year}.${String(month + 1).padStart(2, "0")}.${String(day).padStart(2, "0")}`;

            // íšŒê³ ë¡ ì‘ì„± ë‚ ì§œ
            if (records[recordKey]) {
                dayDiv.classList.add("has-record");
            }

            calendarcontent.appendChild(dayDiv);
        }

    };

    // ì´ì „ ë‹¬ ë²„íŠ¼
    prevmonth.addEventListener("click", () => {
        currentDate.setMonth(currentDate.getMonth() - 1);
        updateCalendar(currentDate);
    });

    // ë‹¤ìŒ ë‹¬ ë²„íŠ¼
    nextmonth.addEventListener("click", () => {
        currentDate.setMonth(currentDate.getMonth() + 1);
        updateCalendar(currentDate);
    });

    // ì´ˆê¸°í™”
    updateCalendar(currentDate);
    updateDateDisplay(); // íšŒê³ ë¡ ë‚ ì§œ ì´ˆê¸°í™”


    // ì¶œì„ë¥  ì°¨íŠ¸ 
    var data = {
        value: 70,
        max: 100,
        label: "ì¶œì„ë¥ "
    };
    
    var chartCtx = document.getElementById('gaugeChart').getContext('2d');

    var config = {
        type: 'doughnut',
        data: {
            labels: [data.label],
            datasets: [{
                data: [data.value, data.max - data.value],
                backgroundColor: ['#f0e53c', 'rgba(0, 0, 0, 0.1)'],
                borderWidth: 0
            }]
        },

        options: {
            responsive: true, // ì°¨íŠ¸ ë°˜ì‘í˜• ì—¬ë¶€ ì„¤ì • 
            //maintainAspectRatio: false, // ê°€ë¡œì„¸ë¡œ ë¹„ìœ¨ ìœ ì§€ X
            cutoutPercentage: 85, // ë„ë„›í˜• ì°¨íŠ¸ ê°€ìš´ë° ë¹„ì–´ìˆëŠ” í¬ê¸° ì„¤ì • 
            rotation: -90, 
            circumference: 180, 
            // tooltips: {
            //     enabled: false
            // },
            // legend: {
            //     display: false
            // },
            animation: {
                animateRotate: true,
                animateScale: false
            },
            title: {
                display: true,
                text: data.label,
                fontSize: 16
            }}
            
    };

    var gaugeChart = new Chart(chartCtx, config);

    // ë¦¬ë·° íŒì—…
    function reviewpopup() {
        window.open("review.html", "íŒì—… í…ŒìŠ¤íŠ¸", "width=800, height=1300, top=10, left=10");
    }


    // progress chart (ë‹¬ì„±ë¥  ì°¨íŠ¸)
    document.addEventListener("DOMContentLoaded", ()=> {
        const gresschart = document.getElementById("progresschart").getContext("2d");

        // ì§„í–‰ë¥  ë°ì´í„° 
        const gressvalue = 70;

        const progresschart = new Chart(gresschart, {
            type: "bar",
            data: {
                labels: ['ì§„í–‰ë¥ '], // Xì¶• ë¼ë²¨
                datasets: [{
                    data: [gressvalue], // ì§„í–‰ë¥  ê°’ 
                    backgroundColor: ['#4CAF50'], // ì§„í–‰ëœ ë¶€ë¶„ ìƒ‰ìƒ
                    borderColor: ['#4CAF50'], // ì§„í–‰ëœ ë¶€ë¶„ í…Œë‘ë¦¬ ìƒ‰ìƒ
                    borderWidth: 1,
                    barThickness: 30, // ë§‰ëŒ€ ë‘ê»˜
                }]
            },

            options: {
                indexAxis: 'y', // ìˆ˜í‰ ë§‰ëŒ€ ì°¨íŠ¸
                responsive: true,
                plugins: {
                legend: { display: false }, // ë²”ë¡€ ë¹„í™œì„±í™”
                tooltip: { enabled: false } // íˆ´íŒ ë¹„í™œì„±í™”
                },
                scales: {
                x: {
                max: 100, // 100% ê¸°ì¤€
                beginAtZero: true, // 0%ì—ì„œ ì‹œì‘
                grid: { display: false }, // Xì¶• ê²©ì ì œê±°
                ticks: { display: false } // Xì¶• ìˆ«ì ìˆ¨ê¹€
                },
                y: {
                grid: { display: false }, // Yì¶• ê²©ì ì œê±°
                ticks: { display: false } // Yì¶• ë¼ë²¨ ìˆ¨ê¹€
                }}         
            }

        })
    });
    </script>
    
    </body>
    </html>
